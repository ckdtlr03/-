<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>디바이스 대여/반납 시스템</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- QR 스캐너 라이브러리 -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <!-- QR 코드 생성 라이브러리 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- 헤더 -->
        <header class="header">
            <h1>디바이스 대여/반납</h1>
            <button id="menuBtn" class="menu-btn">QR 생성</button>
        </header>

        <!-- 메인 화면 -->
        <div id="mainScreen" class="screen active">
            <div class="button-group">
                <button id="rentBtn" class="main-btn rent-btn">
                    <span class="btn-icon">📱</span>
                    <span class="btn-text">대여</span>
                </button>
                <button id="returnBtn" class="main-btn return-btn">
                    <span class="btn-icon">✅</span>
                    <span class="btn-text">반납</span>
                </button>
                <button id="historyBtn" class="main-btn history-btn">
                    <span class="btn-icon">📋</span>
                    <span class="btn-text">대여 이력</span>
                </button>
            </div>
        </div>

        <!-- 대여 정보 입력 화면 -->
        <div id="rentInfoScreen" class="screen">
            <div class="form-container">
                <h2>대여 정보 입력</h2>

                <div class="form-group">
                    <label>셀 선택</label>
                    <div class="cell-selector">
                        <label class="cell-option">
                            <input type="radio" name="cell" value="1셀" checked>
                            <span class="cell-label">1셀</span>
                        </label>
                        <label class="cell-option">
                            <input type="radio" name="cell" value="2셀">
                            <span class="cell-label">2셀</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="renterName">이름</label>
                    <input type="text" id="renterName" placeholder="이름을 입력하세요" autocomplete="off">
                </div>

                <div class="button-row">
                    <button id="backToMainFromRent" class="secondary-btn">뒤로</button>
                    <button id="goToScanFromRent" class="primary-btn">QR 스캔</button>
                </div>
            </div>
        </div>

        <!-- QR 스캔 화면 -->
        <div id="scanScreen" class="screen">
            <div class="scan-container">
                <h2 id="scanTitle">QR 코드 스캔</h2>
                <p id="scanInstruction" class="scan-instruction">디바이스의 QR 코드를 스캔하세요</p>

                <div id="qrReader"></div>

                <div id="scanInfo" class="scan-info">
                    <!-- 스캔 모드에 따라 정보 표시 -->
                </div>

                <button id="backFromScan" class="secondary-btn">취소</button>
            </div>
        </div>

        <!-- 결과 화면 -->
        <div id="resultScreen" class="screen">
            <div class="result-container">
                <div id="resultIcon" class="result-icon">✅</div>
                <h2 id="resultTitle">처리 완료</h2>
                <p id="resultMessage" class="result-message"></p>

                <div id="resultDetails" class="result-details">
                    <!-- 상세 정보 표시 -->
                </div>

                <button id="backToMain" class="primary-btn">확인</button>
            </div>
        </div>

        <!-- QR 생성 화면 -->
        <div id="qrGeneratorScreen" class="screen">
            <div class="form-container">
                <h2>QR 코드 생성</h2>

                <!-- 탭 선택 -->
                <div class="tab-selector">
                    <button id="tabSingle" class="tab-btn active">단일 생성</button>
                    <button id="tabBatch" class="tab-btn">일괄 생성</button>
                </div>

                <!-- 단일 생성 -->
                <div id="singleGenSection" class="gen-section active">
                    <div class="form-group">
                        <label for="genDeviceId">디바이스 ID</label>
                        <input type="text" id="genDeviceId" placeholder="예: DEV001">
                    </div>

                    <div class="form-group">
                        <label for="genDeviceName">디바이스 이름 (선택)</label>
                        <input type="text" id="genDeviceName" placeholder="예: iPhone 15 Pro">
                    </div>

                    <div class="button-row">
                        <button id="backFromGenerator" class="secondary-btn">뒤로</button>
                        <button id="generateQrBtn" class="primary-btn">생성</button>
                    </div>

                    <div id="qrResultArea" class="qr-result-area">
                        <div id="qrCodeDisplay"></div>
                        <div class="qr-result-info">
                            <p><strong>ID:</strong> <span id="qrResultId"></span></p>
                            <p><strong>이름:</strong> <span id="qrResultName"></span></p>
                        </div>
                        <button id="downloadQrBtn" class="primary-btn">다운로드</button>
                    </div>
                </div>

                <!-- 일괄 생성 -->
                <div id="batchGenSection" class="gen-section">
                    <div class="form-group">
                        <label for="batchInput">디바이스 목록 (한 줄에 하나씩)</label>
                        <textarea id="batchInput" class="batch-textarea" placeholder="DEV001,iPhone 15 Pro
DEV002,Galaxy S24
DEV003,iPad Pro 12.9"></textarea>
                        <p class="help-text">형식: 디바이스ID,디바이스이름 (쉼표로 구분)</p>
                    </div>

                    <div class="button-row">
                        <button id="backFromBatch" class="secondary-btn">뒤로</button>
                        <button id="generateBatchBtn" class="primary-btn">일괄 생성</button>
                    </div>

                    <div id="batchResultArea" class="batch-results"></div>
                </div>
            </div>
        </div>

        <!-- 로딩 오버레이 -->
        <div id="loadingOverlay" class="loading-overlay">
            <div class="loading-spinner"></div>
            <p>처리 중...</p>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
